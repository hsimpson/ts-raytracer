/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is not neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/camera.ts":
/*!***********************!*\
  !*** ./src/camera.ts ***!
  \***********************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: top-level-this-exports, __webpack_exports__, __webpack_require__ */
/*! CommonJS bailout: this is used directly at 2:23-27 */
/*! CommonJS bailout: this is used directly at 9:26-30 */
/*! CommonJS bailout: this is used directly at 14:18-22 */
/*! CommonJS bailout: this is used directly at 20:20-24 */
/*! CommonJS bailout: this is used directly at 27:23-27 */
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.Camera = void 0;\r\nconst Vector = __importStar(__webpack_require__(/*! ./vec3 */ \"./src/vec3.ts\"));\r\nconst ray_1 = __importDefault(__webpack_require__(/*! ./raytracer-cpu/ray */ \"./src/raytracer-cpu/ray.ts\"));\r\nconst util_1 = __webpack_require__(/*! ./util */ \"./src/util.ts\");\r\nconst serializing_1 = __webpack_require__(/*! ./serializing */ \"./src/serializing/index.ts\");\r\nlet Camera = class Camera {\r\n    constructor() {\r\n        //\r\n    }\r\n    init(lookFrom, lookAt, vUp, fovY, aspectRatio, aperture, focusDist, t0 = 0, t1 = 0) {\r\n        const theta = util_1.degreeToRadians(fovY);\r\n        const h = Math.tan(theta / 2);\r\n        const viewport_height = 2 * h;\r\n        const viewport_width = aspectRatio * viewport_height;\r\n        this.w = Vector.unitVector(Vector.subVec3(lookFrom, lookAt));\r\n        this.u = Vector.unitVector(Vector.cross(vUp, this.w));\r\n        this.v = Vector.cross(this.w, this.u);\r\n        this.lookFrom = lookFrom;\r\n        this.horizontal = Vector.multScalarVec3(this.u, focusDist * viewport_width);\r\n        this.vertical = Vector.multScalarVec3(this.v, focusDist * viewport_height);\r\n        const half_horizontal = Vector.divScalarVec(this.horizontal, 2);\r\n        const half_vertical = Vector.divScalarVec(this.vertical, 2);\r\n        const focusW = Vector.multScalarVec3(this.w, focusDist);\r\n        this.lowerLeftCorner = Vector.subVec3(Vector.subVec3(Vector.subVec3(this.lookFrom, half_horizontal), half_vertical), focusW);\r\n        this.lenseRadius = aperture / 2;\r\n        this.time0 = t0;\r\n        this.time1 = t1;\r\n    }\r\n    getRay(s, t) {\r\n        const rd = Vector.multScalarVec3(Vector.randomInUnitdisk(), this.lenseRadius);\r\n        const vecU = Vector.multScalarVec3(this.u, rd[0]);\r\n        const vecV = Vector.multScalarVec3(this.v, rd[1]);\r\n        const offset = Vector.addVec3(vecU, vecV);\r\n        const sHor = Vector.multScalarVec3(this.horizontal, s);\r\n        const tVer = Vector.multScalarVec3(this.vertical, t);\r\n        return new ray_1.default(Vector.addVec3(this.lookFrom, offset), Vector.subVec3(Vector.subVec3(Vector.addVec3(Vector.addVec3(this.lowerLeftCorner, sHor), tVer), this.lookFrom), offset), util_1.randomNumberRange(this.time0, this.time1));\r\n    }\r\n    getUniformArray() {\r\n        const array = [];\r\n        array.push(...this.lookFrom, 0.0); // vec4 because of memory alignment\r\n        array.push(...this.lowerLeftCorner, 0.0);\r\n        array.push(...this.horizontal, 0.0);\r\n        array.push(...this.vertical, 0.0);\r\n        array.push(...this.u, 0.0);\r\n        array.push(...this.v, 0.0);\r\n        array.push(...this.w, 0.0);\r\n        array.push(this.lenseRadius);\r\n        array.push(this.time0);\r\n        array.push(this.time1);\r\n        return new Float32Array(array);\r\n    }\r\n};\r\nCamera = __decorate([\r\n    serializing_1.serializable\r\n], Camera);\r\nexports.Camera = Camera;\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/camera.ts?");

/***/ }),

/***/ "./src/raytracer-cpu/aabb.ts":
/*!***********************************!*\
  !*** ./src/raytracer-cpu/aabb.ts ***!
  \***********************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: top-level-this-exports, __webpack_exports__, __webpack_require__ */
/*! CommonJS bailout: this is used directly at 2:18-22 */
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar AABB_1;\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nconst serializing_1 = __webpack_require__(/*! ../serializing */ \"./src/serializing/index.ts\");\r\nlet AABB = AABB_1 = class AABB {\r\n    constructor(min, max) {\r\n        this._min = min !== null && min !== void 0 ? min : [0, 0, 0];\r\n        this._max = max !== null && max !== void 0 ? max : [0, 0, 0];\r\n    }\r\n    copyTo(dest) {\r\n        dest._min = this._min;\r\n        dest._max = this._max;\r\n    }\r\n    get min() {\r\n        return this._min;\r\n    }\r\n    get max() {\r\n        return this._max;\r\n    }\r\n    /*\r\n    public hit(r: Ray, tmin: number, tmax: number): boolean {\r\n      for (let a = 0; a < 3; a++) {\r\n        const rOriginA = r.origin.array[a];\r\n        const rDirectionA = r.direction.array[a];\r\n        const t0 = Math.min((this._min.array[a] - rOriginA) / rDirectionA, (this._max.array[a] - rOriginA) / rDirectionA);\r\n        const t1 = Math.max((this._min.array[a] - rOriginA) / rDirectionA, (this._max.array[a] - rOriginA) / rDirectionA);\r\n  \r\n        tmin = Math.max(t0, tmin);\r\n        tmax = Math.min(t1, tmax);\r\n  \r\n        if (tmax <= tmin) {\r\n          return false;\r\n        }\r\n      }\r\n  \r\n      return true;\r\n    }*/\r\n    hit(r, tmin, tmax) {\r\n        for (let a = 0; a < 3; a++) {\r\n            const invD = 1.0 / r.direction[a];\r\n            let t0 = (this._min[a] - r.origin[a]) * invD;\r\n            let t1 = (this._max[a] - r.origin[a]) * invD;\r\n            if (invD < 0.0) {\r\n                const tmp = t0;\r\n                t0 = t1;\r\n                t1 = tmp;\r\n            }\r\n            tmin = t0 > tmin ? t0 : tmin;\r\n            tmax = t1 < tmax ? t1 : tmax;\r\n            if (tmax <= tmin) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    static surroundingBox(box0, box1) {\r\n        const small = [\r\n            Math.min(box0.min[0], box1.min[0]),\r\n            Math.min(box0.min[1], box1.min[1]),\r\n            Math.min(box0.min[2], box1.min[2]),\r\n        ];\r\n        const big = [\r\n            Math.max(box0.max[0], box1.max[0]),\r\n            Math.max(box0.max[1], box1.max[1]),\r\n            Math.max(box0.max[2], box1.max[2]),\r\n        ];\r\n        return new AABB_1(small, big);\r\n    }\r\n};\r\nAABB = AABB_1 = __decorate([\r\n    serializing_1.serializable\r\n], AABB);\r\nexports.default = AABB;\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/raytracer-cpu/aabb.ts?");

/***/ }),

/***/ "./src/raytracer-cpu/aarect.ts":
/*!*************************************!*\
  !*** ./src/raytracer-cpu/aarect.ts ***!
  \*************************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: top-level-this-exports, __webpack_exports__, __webpack_require__ */
/*! CommonJS bailout: this is used directly at 2:18-22 */
/*! CommonJS bailout: this is used directly at 8:23-27 */
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.YZRect = exports.XZRect = exports.XYRect = void 0;\r\nconst aabb_1 = __importDefault(__webpack_require__(/*! ./aabb */ \"./src/raytracer-cpu/aabb.ts\"));\r\nconst hittable_1 = __webpack_require__(/*! ./hittable */ \"./src/raytracer-cpu/hittable.ts\");\r\nconst serializing_1 = __webpack_require__(/*! ../serializing */ \"./src/serializing/index.ts\");\r\nlet XYRect = class XYRect extends hittable_1.Hittable {\r\n    constructor(x0, x1, y0, y1, k, material) {\r\n        super();\r\n        this.x0 = x0;\r\n        this.x1 = x1;\r\n        this.y0 = y0;\r\n        this.y1 = y1;\r\n        this.k = k;\r\n        this.material = material;\r\n    }\r\n    hit(r, t_min, t_max, rec) {\r\n        const t = (this.k - r.origin[2]) / r.direction[2];\r\n        if (t < t_min || t > t_max) {\r\n            return false;\r\n        }\r\n        const x = r.origin[0] + t * r.direction[0];\r\n        const y = r.origin[1] + t * r.direction[1];\r\n        if (x < this.x0 || x > this.x1 || y < this.y0 || y > this.y1) {\r\n            return false;\r\n        }\r\n        rec.u = (x - this.x0) / (this.x1 - this.x0);\r\n        rec.v = (y - this.y0) / (this.y1 - this.y0);\r\n        rec.t = t;\r\n        const outwardNormal = [0, 0, 1];\r\n        rec.setFaceNormal(r, outwardNormal);\r\n        rec.mat = this.material;\r\n        rec.p = r.at(t);\r\n        return true;\r\n    }\r\n    boundingBox(t0, t1, outputBox) {\r\n        // The bounding box must have non-zero width in each dimension, so pad the Z\r\n        // dimension a small amount.\r\n        const newOutputBox = new aabb_1.default([this.x0, this.y0, this.k - 0.0001], [this.x1, this.y1, this.k + 0.0001]);\r\n        newOutputBox.copyTo(outputBox);\r\n        return true;\r\n    }\r\n};\r\nXYRect = __decorate([\r\n    serializing_1.serializable\r\n], XYRect);\r\nexports.XYRect = XYRect;\r\nlet XZRect = class XZRect extends hittable_1.Hittable {\r\n    constructor(x0, x1, z0, z1, k, material) {\r\n        super();\r\n        this.x0 = x0;\r\n        this.x1 = x1;\r\n        this.z0 = z0;\r\n        this.z1 = z1;\r\n        this.k = k;\r\n        this.material = material;\r\n    }\r\n    hit(r, t_min, t_max, rec) {\r\n        const t = (this.k - r.origin[1]) / r.direction[1];\r\n        if (t < t_min || t > t_max) {\r\n            return false;\r\n        }\r\n        const x = r.origin[0] + t * r.direction[0];\r\n        const z = r.origin[2] + t * r.direction[2];\r\n        if (x < this.x0 || x > this.x1 || z < this.z0 || z > this.z1) {\r\n            return false;\r\n        }\r\n        rec.u = (x - this.x0) / (this.x1 - this.x0);\r\n        rec.v = (z - this.z0) / (this.z1 - this.z0);\r\n        rec.t = t;\r\n        const outwardNormal = [0, 1, 0];\r\n        rec.setFaceNormal(r, outwardNormal);\r\n        rec.mat = this.material;\r\n        rec.p = r.at(t);\r\n        return true;\r\n    }\r\n    boundingBox(t0, t1, outputBox) {\r\n        // The bounding box must have non-zero width in each dimension, so pad the Z\r\n        // dimension a small amount.\r\n        const newOutputBox = new aabb_1.default([this.x0, this.k - 0.0001, this.z0], [this.x1, this.k + 0.0001, this.z1]);\r\n        newOutputBox.copyTo(outputBox);\r\n        return true;\r\n    }\r\n};\r\nXZRect = __decorate([\r\n    serializing_1.serializable\r\n], XZRect);\r\nexports.XZRect = XZRect;\r\nlet YZRect = class YZRect extends hittable_1.Hittable {\r\n    constructor(y0, y1, z0, z1, k, material) {\r\n        super();\r\n        this.y0 = y0;\r\n        this.y1 = y1;\r\n        this.z0 = z0;\r\n        this.z1 = z1;\r\n        this.k = k;\r\n        this.material = material;\r\n    }\r\n    hit(r, t_min, t_max, rec) {\r\n        const t = (this.k - r.origin[0]) / r.direction[0];\r\n        if (t < t_min || t > t_max) {\r\n            return false;\r\n        }\r\n        const y = r.origin[1] + t * r.direction[1];\r\n        const z = r.origin[2] + t * r.direction[2];\r\n        if (y < this.y0 || y > this.y1 || z < this.z0 || z > this.z1) {\r\n            return false;\r\n        }\r\n        rec.u = (y - this.y0) / (this.y1 - this.y0);\r\n        rec.v = (z - this.z0) / (this.z1 - this.z0);\r\n        rec.t = t;\r\n        const outwardNormal = [1, 0, 0];\r\n        rec.setFaceNormal(r, outwardNormal);\r\n        rec.mat = this.material;\r\n        rec.p = r.at(t);\r\n        return true;\r\n    }\r\n    boundingBox(t0, t1, outputBox) {\r\n        // The bounding box must have non-zero width in each dimension, so pad the Z\r\n        // dimension a small amount.\r\n        const newOutputBox = new aabb_1.default([this.k - 0.0001, this.y0, this.z0], [this.k + 0.0001, this.y1, this.z1]);\r\n        newOutputBox.copyTo(outputBox);\r\n        return true;\r\n    }\r\n};\r\nYZRect = __decorate([\r\n    serializing_1.serializable\r\n], YZRect);\r\nexports.YZRect = YZRect;\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/raytracer-cpu/aarect.ts?");

/***/ }),

/***/ "./src/raytracer-cpu/box.ts":
/*!**********************************!*\
  !*** ./src/raytracer-cpu/box.ts ***!
  \**********************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: top-level-this-exports, __webpack_exports__, __webpack_require__ */
/*! CommonJS bailout: this is used directly at 2:18-22 */
/*! CommonJS bailout: this is used directly at 8:23-27 */
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nconst serializing_1 = __webpack_require__(/*! ../serializing */ \"./src/serializing/index.ts\");\r\nconst aabb_1 = __importDefault(__webpack_require__(/*! ./aabb */ \"./src/raytracer-cpu/aabb.ts\"));\r\nconst aarect_1 = __webpack_require__(/*! ./aarect */ \"./src/raytracer-cpu/aarect.ts\");\r\nconst hittable_1 = __webpack_require__(/*! ./hittable */ \"./src/raytracer-cpu/hittable.ts\");\r\nconst hittablelist_1 = __webpack_require__(/*! ./hittablelist */ \"./src/raytracer-cpu/hittablelist.ts\");\r\nlet Box = class Box extends hittable_1.Hittable {\r\n    constructor(p0, p1, mat) {\r\n        super();\r\n        this._sides = new hittablelist_1.HittableList();\r\n        this._boxMin = p0;\r\n        this._boxMax = p1;\r\n        this._sides.add(new aarect_1.XYRect(p0[0], p1[0], p0[1], p1[1], p1[2], mat));\r\n        this._sides.add(new aarect_1.XYRect(p0[0], p1[0], p0[1], p1[1], p0[2], mat));\r\n        this._sides.add(new aarect_1.XZRect(p0[0], p1[0], p0[2], p1[2], p1[1], mat));\r\n        this._sides.add(new aarect_1.XZRect(p0[0], p1[0], p0[2], p1[2], p0[1], mat));\r\n        this._sides.add(new aarect_1.YZRect(p0[1], p1[1], p0[2], p1[2], p1[0], mat));\r\n        this._sides.add(new aarect_1.YZRect(p0[1], p1[1], p0[2], p1[2], p0[0], mat));\r\n    }\r\n    hit(r, t_min, t_max, rec) {\r\n        return this._sides.hit(r, t_min, t_max, rec);\r\n    }\r\n    boundingBox(t0, t1, outputBox) {\r\n        const newOutputBox = new aabb_1.default(this._boxMin, this._boxMax);\r\n        newOutputBox.copyTo(outputBox);\r\n        return true;\r\n    }\r\n};\r\nBox = __decorate([\r\n    serializing_1.serializable\r\n], Box);\r\nexports.default = Box;\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/raytracer-cpu/box.ts?");

/***/ }),

/***/ "./src/raytracer-cpu/bvhnode.ts":
/*!**************************************!*\
  !*** ./src/raytracer-cpu/bvhnode.ts ***!
  \**************************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: top-level-this-exports, __webpack_exports__, __webpack_require__ */
/*! CommonJS bailout: this is used directly at 2:18-22 */
/*! CommonJS bailout: this is used directly at 8:23-27 */
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nvar BVHNode_1;\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nconst hittable_1 = __webpack_require__(/*! ./hittable */ \"./src/raytracer-cpu/hittable.ts\");\r\nconst aabb_1 = __importDefault(__webpack_require__(/*! ./aabb */ \"./src/raytracer-cpu/aabb.ts\"));\r\nconst util_1 = __webpack_require__(/*! ../util */ \"./src/util.ts\");\r\nconst serializing_1 = __webpack_require__(/*! ../serializing */ \"./src/serializing/index.ts\");\r\n//let _id = 0;\r\nlet BVHNode = BVHNode_1 = class BVHNode extends hittable_1.Hittable {\r\n    //private id = _id;\r\n    constructor() {\r\n        super();\r\n        this.box = new aabb_1.default();\r\n        //console.log(`BVH-Node ${this.id}`);\r\n        //_id++;\r\n    }\r\n    static createFromHitableList(list, time0, time1) {\r\n        const node = new BVHNode_1();\r\n        node.init(list.objects, 0, list.objects.length, time0, time1);\r\n        return node;\r\n    }\r\n    static createFromObjects(objects, start, end, time0, time1) {\r\n        const node = new BVHNode_1();\r\n        node.init(objects, start, end, time0, time1);\r\n        return node;\r\n    }\r\n    init(objects, start, end, time0, time1) {\r\n        const axis = util_1.randomInt(0, 2);\r\n        const comparator = axis === 0 ? boxXCompare : axis === 1 ? boxYCompare : boxZCompare;\r\n        const objectSpan = end - start;\r\n        if (objectSpan === 1) {\r\n            this.left = this.right = objects[start];\r\n        }\r\n        else if (objectSpan === 2) {\r\n            if (comparator(objects[start], objects[start + 1]) === -1) {\r\n                this.left = objects[start];\r\n                this.right = objects[start + 1];\r\n            }\r\n            else {\r\n                this.left = objects[start + 1];\r\n                this.right = objects[start];\r\n            }\r\n        }\r\n        else {\r\n            util_1.sortArrayRange(objects, start, end, comparator);\r\n            const mid = start + Math.floor(objectSpan / 2);\r\n            this.left = BVHNode_1.createFromObjects(objects, start, mid, time0, time1);\r\n            this.right = BVHNode_1.createFromObjects(objects, mid, end, time0, time1);\r\n        }\r\n        const boxLeft = new aabb_1.default();\r\n        const boxRight = new aabb_1.default();\r\n        if (!this.left.boundingBox(time0, time1, boxLeft) || !this.right.boundingBox(time0, time1, boxRight)) {\r\n            console.error('No bounding box in bvh_node constructor.');\r\n        }\r\n        this.box = aabb_1.default.surroundingBox(boxLeft, boxRight);\r\n    }\r\n    // public hit(r: Ray, tMin: number, tMax: number, rec: HitRecord): boolean {\r\n    //   //console.time(`BVH-hit #${this.id}`);\r\n    //   if (!this.box.hit(r, tMin, tMax)) {\r\n    //     return false;\r\n    //     //console.timeEnd(`BVH-hit #${this.id}`);\r\n    //   }\r\n    //   const hitLeft = this.left.hit(r, tMin, tMax, rec);\r\n    //   const hitRight = this.right.hit(r, tMin, hitLeft ? rec.t : tMax, rec);\r\n    //   //console.timeEnd(`BVH-hit #${this.id}`);\r\n    //   return hitLeft || hitRight;\r\n    // }\r\n    hit(r, tMin, tMax, rec) {\r\n        if (this.box.hit(r, tMin, tMax)) {\r\n            if (this.left.hit(r, tMin, tMax, rec)) {\r\n                this.right.hit(r, tMin, rec.t, rec);\r\n                return true;\r\n            }\r\n            else {\r\n                return this.right.hit(r, tMin, tMax, rec);\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    boundingBox(t0, t1, outputBox) {\r\n        this.box.copyTo(outputBox);\r\n        return true;\r\n    }\r\n};\r\nBVHNode = BVHNode_1 = __decorate([\r\n    serializing_1.serializable\r\n], BVHNode);\r\nexports.default = BVHNode;\r\nfunction boxCompare(a, b, axis) {\r\n    const boxA = new aabb_1.default();\r\n    const boxB = new aabb_1.default();\r\n    if (!a.boundingBox(0, 0, boxA) || !b.boundingBox(0, 0, boxB)) {\r\n        console.error('No bounding box in bvh_node constructor.');\r\n    }\r\n    return boxA.min[axis] < boxB.min[axis] ? -1 : 1;\r\n}\r\nfunction boxXCompare(a, b) {\r\n    return boxCompare(a, b, 0);\r\n}\r\nfunction boxYCompare(a, b) {\r\n    return boxCompare(a, b, 1);\r\n}\r\nfunction boxZCompare(a, b) {\r\n    return boxCompare(a, b, 2);\r\n}\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/raytracer-cpu/bvhnode.ts?");

/***/ }),

/***/ "./node_modules/ts-loader/index.js!./src/raytracer-cpu/compute.worker.ts":
/*!*******************************************************************************!*\
  !*** ./node_modules/ts-loader/index.js!./src/raytracer-cpu/compute.worker.ts ***!
  \*******************************************************************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: top-level-this-exports, __webpack_exports__, __webpack_require__ */
/*! CommonJS bailout: this is used directly at 2:23-27 */
/*! CommonJS bailout: this is used directly at 9:26-30 */
/*! CommonJS bailout: this is used directly at 14:20-24 */
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nconst camera_1 = __webpack_require__(/*! ../camera */ \"./src/camera.ts\");\r\nconst deserialize_1 = __webpack_require__(/*! ../serializing/deserialize */ \"./src/serializing/deserialize.ts\");\r\nconst util_1 = __webpack_require__(/*! ../util */ \"./src/util.ts\");\r\nconst Vector = __importStar(__webpack_require__(/*! ../vec3 */ \"./src/vec3.ts\"));\r\nconst deserializermap_1 = __webpack_require__(/*! ./deserializermap */ \"./src/raytracer-cpu/deserializermap.ts\");\r\nconst hittablelist_1 = __webpack_require__(/*! ./hittablelist */ \"./src/raytracer-cpu/hittablelist.ts\");\r\nconst ray_1 = __webpack_require__(/*! ./ray */ \"./src/raytracer-cpu/ray.ts\");\r\nconst workerinterfaces_1 = __webpack_require__(/*! ./workerinterfaces */ \"./src/raytracer-cpu/workerinterfaces.ts\");\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nconst map = deserializermap_1.DeserializerMap;\r\nconst _controllerCtx = self;\r\nlet _id;\r\nconst gamma22Exponent = 1.0 / 2.2;\r\nconst writeColor = (array, offset, color, spp) => {\r\n    let [r, g, b] = color;\r\n    // Divide the color total by the number of samples\r\n    const scale = 1.0 / spp;\r\n    // gamma 2.0\r\n    // r = Math.sqrt(scale * r);\r\n    // g = Math.sqrt(scale * g);\r\n    // b = Math.sqrt(scale * b);\r\n    // gamma 2.2\r\n    r = Math.pow(scale * r, gamma22Exponent);\r\n    g = Math.pow(scale * g, gamma22Exponent);\r\n    b = Math.pow(scale * b, gamma22Exponent);\r\n    // Write the translated [0,255] value of each color component.\r\n    array[offset++] = r * 255;\r\n    array[offset++] = g * 255;\r\n    array[offset++] = b * 255;\r\n};\r\nconst start = (msg) => {\r\n    _id = msg.data.workerId;\r\n    const camera = deserialize_1.deserialize(camera_1.Camera, msg.data.camera);\r\n    const world = deserialize_1.deserialize(hittablelist_1.HittableList, msg.data.world);\r\n    const background = msg.data.background;\r\n    const imageWidth = msg.data.imageWidth;\r\n    const imageHeight = msg.data.imageHeight;\r\n    const scanlineCount = msg.data.scanlineCount;\r\n    const startLine = msg.data.startLine;\r\n    const spp = msg.data.samplesPerPixel;\r\n    const maxBounces = msg.data.maxBounces;\r\n    console.log(`worker[${_id}] startLine: ${startLine}`);\r\n    console.log(`worker[${_id}] linecount: ${scanlineCount}`);\r\n    const dataArray = new Uint8ClampedArray(imageWidth * scanlineCount * 3);\r\n    let offset = 0;\r\n    const endLine = startLine + 1 - scanlineCount;\r\n    let linesToCalc = scanlineCount;\r\n    // const sampleOffsets = [];\r\n    // for (let sample = 0; sample < spp; sample++) {\r\n    //   sampleOffsets.push(randomNumber());\r\n    // }\r\n    for (let j = startLine; j >= endLine; j--) {\r\n        console.log(`worker[${_id}] scanlines remaining ${linesToCalc--}`);\r\n        for (let i = 0; i < imageWidth; i++) {\r\n            let pixelColor = [0, 0, 0];\r\n            for (let s = 0; s < spp; s++) {\r\n                // const rnd = sampleOffsets[s];\r\n                const u = (i + util_1.randomNumber()) / (imageWidth - 1);\r\n                const v = (j + util_1.randomNumber()) / (imageHeight - 1);\r\n                // const u = (i + rnd) / (imageWidth - 1);\r\n                // const v = (j + rnd) / (imageHeight - 1);\r\n                const r = camera.getRay(u, v);\r\n                pixelColor = Vector.addVec3(pixelColor, ray_1.rayColor(r, background, world, maxBounces));\r\n            }\r\n            writeColor(dataArray, offset, pixelColor, spp);\r\n            offset += 3;\r\n        }\r\n    }\r\n    const computeEndMessage = {\r\n        cmd: workerinterfaces_1.ComputeCommands.END,\r\n        data: {\r\n            workerId: _id,\r\n            pixelArray: dataArray,\r\n            startLine,\r\n            scanlineCount,\r\n        },\r\n    };\r\n    _controllerCtx.postMessage(computeEndMessage);\r\n};\r\n// Respond to message from parent thread\r\n_controllerCtx.addEventListener('message', (event) => {\r\n    const msg = event.data;\r\n    switch (msg.cmd) {\r\n        case workerinterfaces_1.ComputeCommands.START:\r\n            start(msg);\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n});\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/raytracer-cpu/compute.worker.ts?./node_modules/ts-loader/index.js");

/***/ }),

/***/ "./src/raytracer-cpu/constantmedium.ts":
/*!*********************************************!*\
  !*** ./src/raytracer-cpu/constantmedium.ts ***!
  \*********************************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: top-level-this-exports, __webpack_exports__, __webpack_require__ */
/*! CommonJS bailout: this is used directly at 2:23-27 */
/*! CommonJS bailout: this is used directly at 9:26-30 */
/*! CommonJS bailout: this is used directly at 14:18-22 */
/*! CommonJS bailout: this is used directly at 20:20-24 */
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.ConstantMedium = void 0;\r\nconst serializing_1 = __webpack_require__(/*! ../serializing */ \"./src/serializing/index.ts\");\r\nconst util_1 = __webpack_require__(/*! ../util */ \"./src/util.ts\");\r\nconst Vector = __importStar(__webpack_require__(/*! ../vec3 */ \"./src/vec3.ts\"));\r\nconst hittable_1 = __webpack_require__(/*! ./hittable */ \"./src/raytracer-cpu/hittable.ts\");\r\nconst isotropic_1 = __webpack_require__(/*! ./isotropic */ \"./src/raytracer-cpu/isotropic.ts\");\r\nlet ConstantMedium = class ConstantMedium extends hittable_1.Hittable {\r\n    constructor(boundary, density, material) {\r\n        super();\r\n        this._boundary = boundary;\r\n        this._negInvDensity = -1 / density;\r\n        this._phaseFunction = new isotropic_1.IsoTropic(material);\r\n    }\r\n    hit(r, t_min, t_max, rec) {\r\n        const enableDebug = false;\r\n        const debugging = enableDebug && util_1.randomNumber() < 0.00001;\r\n        const rec1 = new hittable_1.HitRecord();\r\n        const rec2 = new hittable_1.HitRecord();\r\n        if (!this._boundary.hit(r, Number.NEGATIVE_INFINITY, Number.POSITIVE_INFINITY, rec1)) {\r\n            return false;\r\n        }\r\n        if (!this._boundary.hit(r, rec1.t + 0.0001, Number.POSITIVE_INFINITY, rec2)) {\r\n            return false;\r\n        }\r\n        if (debugging) {\r\n            console.log(`t0=${rec1.t}, t1=${rec2.t}`);\r\n        }\r\n        if (rec1.t < t_min) {\r\n            rec1.t = t_min;\r\n        }\r\n        if (rec2.t > t_max) {\r\n            rec2.t = t_max;\r\n        }\r\n        if (rec1.t >= rec2.t) {\r\n            return false;\r\n        }\r\n        if (rec1.t < 0) {\r\n            rec1.t = 0;\r\n        }\r\n        const rayLength = Vector.length(r.direction);\r\n        const distanceInsideBoundary = (rec2.t - rec1.t) * rayLength;\r\n        const hitDistance = this._negInvDensity * Math.log(util_1.randomNumber());\r\n        if (hitDistance > distanceInsideBoundary) {\r\n            return false;\r\n        }\r\n        rec.t = rec1.t + hitDistance / rayLength;\r\n        rec.p = r.at(rec.t);\r\n        if (debugging) {\r\n            console.log(`hitDistance = ${hitDistance}\\n\n                   rec.t = ${rec.t}\\n\n                   rec.p = ${rec.p}\n      `);\r\n        }\r\n        rec.normal = [1, 0, 0]; // arbitrary\r\n        rec.frontFace = true; // also arbitrary\r\n        rec.mat = this._phaseFunction;\r\n        return true;\r\n    }\r\n    boundingBox(t0, t1, outputBox) {\r\n        return this._boundary.boundingBox(t0, t1, outputBox);\r\n    }\r\n};\r\nConstantMedium = __decorate([\r\n    serializing_1.serializable\r\n], ConstantMedium);\r\nexports.ConstantMedium = ConstantMedium;\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/raytracer-cpu/constantmedium.ts?");

/***/ }),

/***/ "./src/raytracer-cpu/deserializermap.ts":
/*!**********************************************!*\
  !*** ./src/raytracer-cpu/deserializermap.ts ***!
  \**********************************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: top-level-this-exports, __webpack_exports__, __webpack_require__ */
/*! CommonJS bailout: this is used directly at 2:23-27 */
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.DeserializerMap = void 0;\r\nconst aabb_1 = __importDefault(__webpack_require__(/*! ./aabb */ \"./src/raytracer-cpu/aabb.ts\"));\r\nconst aarect_1 = __webpack_require__(/*! ./aarect */ \"./src/raytracer-cpu/aarect.ts\");\r\nconst box_1 = __importDefault(__webpack_require__(/*! ./box */ \"./src/raytracer-cpu/box.ts\"));\r\nconst bvhnode_1 = __importDefault(__webpack_require__(/*! ./bvhnode */ \"./src/raytracer-cpu/bvhnode.ts\"));\r\nconst constantmedium_1 = __webpack_require__(/*! ./constantmedium */ \"./src/raytracer-cpu/constantmedium.ts\");\r\nconst dielectric_1 = __importDefault(__webpack_require__(/*! ./dielectric */ \"./src/raytracer-cpu/dielectric.ts\"));\r\nconst diffuselight_1 = __importDefault(__webpack_require__(/*! ./diffuselight */ \"./src/raytracer-cpu/diffuselight.ts\"));\r\nconst isotropic_1 = __webpack_require__(/*! ./isotropic */ \"./src/raytracer-cpu/isotropic.ts\");\r\nconst lambertian_1 = __importDefault(__webpack_require__(/*! ./lambertian */ \"./src/raytracer-cpu/lambertian.ts\"));\r\nconst metal_1 = __importDefault(__webpack_require__(/*! ./metal */ \"./src/raytracer-cpu/metal.ts\"));\r\nconst movingsphere_1 = __importDefault(__webpack_require__(/*! ./movingsphere */ \"./src/raytracer-cpu/movingsphere.ts\"));\r\nconst perlin_1 = __importDefault(__webpack_require__(/*! ./perlin */ \"./src/raytracer-cpu/perlin.ts\"));\r\nconst rotation_1 = __webpack_require__(/*! ./rotation */ \"./src/raytracer-cpu/rotation.ts\");\r\nconst sphere_1 = __webpack_require__(/*! ./sphere */ \"./src/raytracer-cpu/sphere.ts\");\r\nconst texture_1 = __webpack_require__(/*! ./texture */ \"./src/raytracer-cpu/texture.ts\");\r\nconst translate_1 = __importDefault(__webpack_require__(/*! ./translate */ \"./src/raytracer-cpu/translate.ts\"));\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nexports.DeserializerMap = {\r\n    lambertianMaterial: lambertian_1.default,\r\n    metalMaterial: metal_1.default,\r\n    dielectricMaterial: dielectric_1.default,\r\n    sphere: sphere_1.Sphere,\r\n    movingSphere: movingsphere_1.default,\r\n    bvhNode: bvhnode_1.default,\r\n    aabb: aabb_1.default,\r\n    checkerTexture: texture_1.CheckerTexture,\r\n    solidTexture: texture_1.SolidColor,\r\n    perlin: perlin_1.default,\r\n    noise: texture_1.NoiseTexture,\r\n    image: texture_1.ImageTexture,\r\n    diffuseLight: diffuselight_1.default,\r\n    xyRect: aarect_1.XYRect,\r\n    xzRect: aarect_1.XZRect,\r\n    yzRect: aarect_1.YZRect,\r\n    box: box_1.default,\r\n    translate: translate_1.default,\r\n    rotateY: rotation_1.RotateY,\r\n    constantMedium: constantmedium_1.ConstantMedium,\r\n    isoTropic: isotropic_1.IsoTropic,\r\n};\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/raytracer-cpu/deserializermap.ts?");

/***/ }),

/***/ "./src/raytracer-cpu/dielectric.ts":
/*!*****************************************!*\
  !*** ./src/raytracer-cpu/dielectric.ts ***!
  \*****************************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: top-level-this-exports, __webpack_exports__, __webpack_require__ */
/*! CommonJS bailout: this is used directly at 2:23-27 */
/*! CommonJS bailout: this is used directly at 9:26-30 */
/*! CommonJS bailout: this is used directly at 14:18-22 */
/*! CommonJS bailout: this is used directly at 20:20-24 */
/*! CommonJS bailout: this is used directly at 27:23-27 */
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nconst material_1 = __importDefault(__webpack_require__(/*! ./material */ \"./src/raytracer-cpu/material.ts\"));\r\nconst ray_1 = __importDefault(__webpack_require__(/*! ./ray */ \"./src/raytracer-cpu/ray.ts\"));\r\nconst util_1 = __webpack_require__(/*! ../util */ \"./src/util.ts\");\r\nconst Vector = __importStar(__webpack_require__(/*! ../vec3 */ \"./src/vec3.ts\"));\r\nconst serializing_1 = __webpack_require__(/*! ../serializing */ \"./src/serializing/index.ts\");\r\nlet DielectricMaterial = class DielectricMaterial extends material_1.default {\r\n    constructor(refIdx) {\r\n        super();\r\n        this._indexOfRefraction = refIdx;\r\n    }\r\n    get indexOfRefraction() {\r\n        return this._indexOfRefraction;\r\n    }\r\n    schlick(cosine, refIdx) {\r\n        let r0 = (1 - refIdx) / (1 + refIdx);\r\n        r0 = r0 * r0;\r\n        return r0 + (1 - r0) * Math.pow(1 - cosine, 5);\r\n    }\r\n    scatter(r_in, rec, attenuation, scattered) {\r\n        Vector.set(attenuation, 1.0, 1.0, 1.0);\r\n        const etai_over_etat = rec.frontFace ? 1 / this._indexOfRefraction : this._indexOfRefraction;\r\n        const unit_direction = Vector.unitVector(r_in.direction);\r\n        const cos_theta = Math.min(Vector.dot(Vector.negate(unit_direction), rec.normal), 1);\r\n        const sin_theta = Math.sqrt(1 - cos_theta * cos_theta);\r\n        if (etai_over_etat * sin_theta > 1) {\r\n            const reflected = Vector.reflect(unit_direction, rec.normal);\r\n            new ray_1.default(rec.p, reflected, r_in.time).copyTo(scattered);\r\n            return true;\r\n        }\r\n        const reflect_prob = this.schlick(cos_theta, etai_over_etat);\r\n        if (util_1.randomNumber() < reflect_prob) {\r\n            const reflected = Vector.reflect(unit_direction, rec.normal);\r\n            new ray_1.default(rec.p, reflected, r_in.time).copyTo(scattered);\r\n            return true;\r\n        }\r\n        const refracted = Vector.refract(unit_direction, rec.normal, etai_over_etat);\r\n        new ray_1.default(rec.p, refracted, r_in.time).copyTo(scattered);\r\n        return true;\r\n    }\r\n};\r\nDielectricMaterial = __decorate([\r\n    serializing_1.serializable\r\n], DielectricMaterial);\r\nexports.default = DielectricMaterial;\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/raytracer-cpu/dielectric.ts?");

/***/ }),

/***/ "./src/raytracer-cpu/diffuselight.ts":
/*!*******************************************!*\
  !*** ./src/raytracer-cpu/diffuselight.ts ***!
  \*******************************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: top-level-this-exports, __webpack_exports__, __webpack_require__ */
/*! CommonJS bailout: this is used directly at 2:18-22 */
/*! CommonJS bailout: this is used directly at 8:23-27 */
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nconst serializing_1 = __webpack_require__(/*! ../serializing */ \"./src/serializing/index.ts\");\r\nconst material_1 = __importDefault(__webpack_require__(/*! ./material */ \"./src/raytracer-cpu/material.ts\"));\r\nconst texture_1 = __webpack_require__(/*! ./texture */ \"./src/raytracer-cpu/texture.ts\");\r\nlet DiffuseLight = class DiffuseLight extends material_1.default {\r\n    constructor(color) {\r\n        super();\r\n        if (color) {\r\n            this._emit = new texture_1.SolidColor(color);\r\n        }\r\n    }\r\n    get texture() {\r\n        return this._emit;\r\n    }\r\n    scatter(_r_in, _rec, _attenuation, _scattered) {\r\n        return false;\r\n    }\r\n    emitted(u, v, p) {\r\n        return this._emit.value(u, v, p);\r\n    }\r\n};\r\nDiffuseLight = __decorate([\r\n    serializing_1.serializable\r\n], DiffuseLight);\r\nexports.default = DiffuseLight;\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/raytracer-cpu/diffuselight.ts?");

/***/ }),

/***/ "./src/raytracer-cpu/hittable.ts":
/*!***************************************!*\
  !*** ./src/raytracer-cpu/hittable.ts ***!
  \***************************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: top-level-this-exports, __webpack_exports__, __webpack_require__ */
/*! CommonJS bailout: this is used directly at 2:23-27 */
/*! CommonJS bailout: this is used directly at 9:26-30 */
/*! CommonJS bailout: this is used directly at 14:20-24 */
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.Hittable = exports.HitRecord = void 0;\r\nconst Vector = __importStar(__webpack_require__(/*! ../vec3 */ \"./src/vec3.ts\"));\r\nclass HitRecord {\r\n    constructor() {\r\n        this.p = [0, 0, 0];\r\n        this.normal = [0, 0, 0];\r\n        this.t = 0;\r\n        this.u = 0;\r\n        this.v = 0;\r\n        this.frontFace = true;\r\n    }\r\n    setFaceNormal(r, outward_normal) {\r\n        this.frontFace = Vector.dot(r.direction, outward_normal) < 0;\r\n        this.normal = this.frontFace ? outward_normal : Vector.negate(outward_normal);\r\n    }\r\n    copyTo(dest) {\r\n        dest.p = this.p;\r\n        dest.normal = this.normal;\r\n        dest.t = this.t;\r\n        dest.u = this.u;\r\n        dest.v = this.v;\r\n        dest.frontFace = this.frontFace;\r\n        dest.mat = this.mat;\r\n    }\r\n}\r\nexports.HitRecord = HitRecord;\r\nclass Hittable {\r\n}\r\nexports.Hittable = Hittable;\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/raytracer-cpu/hittable.ts?");

/***/ }),

/***/ "./src/raytracer-cpu/hittablelist.ts":
/*!*******************************************!*\
  !*** ./src/raytracer-cpu/hittablelist.ts ***!
  \*******************************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: top-level-this-exports, __webpack_exports__, __webpack_require__ */
/*! CommonJS bailout: this is used directly at 2:18-22 */
/*! CommonJS bailout: this is used directly at 8:23-27 */
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.HittableList = void 0;\r\nconst serializing_1 = __webpack_require__(/*! ../serializing */ \"./src/serializing/index.ts\");\r\nconst aabb_1 = __importDefault(__webpack_require__(/*! ./aabb */ \"./src/raytracer-cpu/aabb.ts\"));\r\nconst hittable_1 = __webpack_require__(/*! ./hittable */ \"./src/raytracer-cpu/hittable.ts\");\r\nlet HittableList = class HittableList extends hittable_1.Hittable {\r\n    constructor(object) {\r\n        super();\r\n        this._objects = [];\r\n        if (object) {\r\n            this.add(object);\r\n        }\r\n    }\r\n    get objects() {\r\n        return this._objects;\r\n    }\r\n    clear() {\r\n        this._objects.length = 0;\r\n    }\r\n    add(object) {\r\n        this._objects.push(object);\r\n    }\r\n    hit(r, t_min, t_max, rec) {\r\n        const temp_rec = new hittable_1.HitRecord();\r\n        let hit_anything = false;\r\n        let closest_so_far = t_max;\r\n        for (const object of this._objects) {\r\n            if (object.hit(r, t_min, closest_so_far, temp_rec)) {\r\n                hit_anything = true;\r\n                closest_so_far = temp_rec.t;\r\n                temp_rec.copyTo(rec);\r\n            }\r\n        }\r\n        return hit_anything;\r\n    }\r\n    boundingBox(t0, t1, outputBox) {\r\n        if (this._objects.length === 0) {\r\n            return false;\r\n        }\r\n        const tempBox = new aabb_1.default();\r\n        let firstBox = true;\r\n        for (const object of this._objects) {\r\n            if (!object.boundingBox(t0, t1, tempBox)) {\r\n                return false;\r\n            }\r\n            if (firstBox) {\r\n                tempBox.copyTo(outputBox);\r\n            }\r\n            else {\r\n                aabb_1.default.surroundingBox(outputBox, tempBox).copyTo(outputBox);\r\n            }\r\n            firstBox = false;\r\n        }\r\n        return true;\r\n    }\r\n};\r\nHittableList = __decorate([\r\n    serializing_1.serializable\r\n], HittableList);\r\nexports.HittableList = HittableList;\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/raytracer-cpu/hittablelist.ts?");

/***/ }),

/***/ "./src/raytracer-cpu/isotropic.ts":
/*!****************************************!*\
  !*** ./src/raytracer-cpu/isotropic.ts ***!
  \****************************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: top-level-this-exports, __webpack_exports__, __webpack_require__ */
/*! CommonJS bailout: this is used directly at 2:23-27 */
/*! CommonJS bailout: this is used directly at 9:26-30 */
/*! CommonJS bailout: this is used directly at 14:18-22 */
/*! CommonJS bailout: this is used directly at 20:20-24 */
/*! CommonJS bailout: this is used directly at 27:23-27 */
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.IsoTropic = void 0;\r\nconst serializing_1 = __webpack_require__(/*! ../serializing */ \"./src/serializing/index.ts\");\r\nconst Vector = __importStar(__webpack_require__(/*! ../vec3 */ \"./src/vec3.ts\"));\r\nconst material_1 = __importDefault(__webpack_require__(/*! ./material */ \"./src/raytracer-cpu/material.ts\"));\r\nconst ray_1 = __importDefault(__webpack_require__(/*! ./ray */ \"./src/raytracer-cpu/ray.ts\"));\r\nconst texture_1 = __webpack_require__(/*! ./texture */ \"./src/raytracer-cpu/texture.ts\");\r\nlet IsoTropic = class IsoTropic extends material_1.default {\r\n    constructor(albedo) {\r\n        super();\r\n        if (Vector.isVec3(albedo)) {\r\n            this._albedo = new texture_1.SolidColor(albedo);\r\n        }\r\n        else {\r\n            this._albedo = albedo;\r\n        }\r\n    }\r\n    scatter(r_in, rec, attenuation, scattered) {\r\n        new ray_1.default(rec.p, Vector.randomInUnitSphere(), r_in.time).copyTo(scattered);\r\n        Vector.copyTo(this._albedo.value(rec.u, rec.v, rec.p), attenuation);\r\n        return true;\r\n    }\r\n};\r\nIsoTropic = __decorate([\r\n    serializing_1.serializable\r\n], IsoTropic);\r\nexports.IsoTropic = IsoTropic;\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/raytracer-cpu/isotropic.ts?");

/***/ }),

/***/ "./src/raytracer-cpu/lambertian.ts":
/*!*****************************************!*\
  !*** ./src/raytracer-cpu/lambertian.ts ***!
  \*****************************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: top-level-this-exports, __webpack_exports__, __webpack_require__ */
/*! CommonJS bailout: this is used directly at 2:23-27 */
/*! CommonJS bailout: this is used directly at 9:26-30 */
/*! CommonJS bailout: this is used directly at 14:18-22 */
/*! CommonJS bailout: this is used directly at 20:20-24 */
/*! CommonJS bailout: this is used directly at 27:23-27 */
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nconst material_1 = __importDefault(__webpack_require__(/*! ./material */ \"./src/raytracer-cpu/material.ts\"));\r\nconst ray_1 = __importDefault(__webpack_require__(/*! ./ray */ \"./src/raytracer-cpu/ray.ts\"));\r\nconst Vector = __importStar(__webpack_require__(/*! ../vec3 */ \"./src/vec3.ts\"));\r\nconst serializing_1 = __webpack_require__(/*! ../serializing */ \"./src/serializing/index.ts\");\r\nconst texture_1 = __webpack_require__(/*! ./texture */ \"./src/raytracer-cpu/texture.ts\");\r\nlet LambertianMaterial = class LambertianMaterial extends material_1.default {\r\n    constructor(color) {\r\n        super();\r\n        if (color) {\r\n            this._albedo = new texture_1.SolidColor(color);\r\n        }\r\n    }\r\n    set texture(texture) {\r\n        this._albedo = texture;\r\n    }\r\n    get texture() {\r\n        return this._albedo;\r\n    }\r\n    scatter(r_in, rec, attenuation, scattered) {\r\n        const scatter_direction = Vector.addVec3(rec.normal, Vector.randomUnitVector());\r\n        new ray_1.default(rec.p, scatter_direction, r_in.time).copyTo(scattered);\r\n        const col = this._albedo.value(rec.u, rec.v, rec.p);\r\n        Vector.copyTo(col, attenuation);\r\n        return true;\r\n    }\r\n};\r\nLambertianMaterial = __decorate([\r\n    serializing_1.serializable\r\n], LambertianMaterial);\r\nexports.default = LambertianMaterial;\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/raytracer-cpu/lambertian.ts?");

/***/ }),

/***/ "./src/raytracer-cpu/material.ts":
/*!***************************************!*\
  !*** ./src/raytracer-cpu/material.ts ***!
  \***************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__ */
/***/ ((__unused_webpack_module, exports) => {

eval("\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nclass Material {\r\n    emitted(_u, _v, _p) {\r\n        return [0, 0, 0];\r\n    }\r\n    get texture() {\r\n        return undefined;\r\n    }\r\n}\r\nexports.default = Material;\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/raytracer-cpu/material.ts?");

/***/ }),

/***/ "./src/raytracer-cpu/metal.ts":
/*!************************************!*\
  !*** ./src/raytracer-cpu/metal.ts ***!
  \************************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: top-level-this-exports, __webpack_exports__, __webpack_require__ */
/*! CommonJS bailout: this is used directly at 2:23-27 */
/*! CommonJS bailout: this is used directly at 9:26-30 */
/*! CommonJS bailout: this is used directly at 14:18-22 */
/*! CommonJS bailout: this is used directly at 20:20-24 */
/*! CommonJS bailout: this is used directly at 27:23-27 */
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nconst serializing_1 = __webpack_require__(/*! ../serializing */ \"./src/serializing/index.ts\");\r\nconst Vector = __importStar(__webpack_require__(/*! ../vec3 */ \"./src/vec3.ts\"));\r\nconst material_1 = __importDefault(__webpack_require__(/*! ./material */ \"./src/raytracer-cpu/material.ts\"));\r\nconst ray_1 = __importDefault(__webpack_require__(/*! ./ray */ \"./src/raytracer-cpu/ray.ts\"));\r\nlet MetalMaterial = class MetalMaterial extends material_1.default {\r\n    constructor(color, roughness) {\r\n        super();\r\n        this._baseColor = color;\r\n        this._roughness = roughness;\r\n    }\r\n    get baseColor() {\r\n        return this._baseColor;\r\n    }\r\n    get roughness() {\r\n        return this._roughness;\r\n    }\r\n    scatter(r_in, rec, attenuation, scattered) {\r\n        const reflect = Vector.reflect(Vector.unitVector(r_in.direction), rec.normal);\r\n        new ray_1.default(rec.p, Vector.addVec3(reflect, Vector.multScalarVec3(Vector.randomInUnitSphere(), this._roughness)), r_in.time).copyTo(scattered);\r\n        Vector.copyTo(this._baseColor, attenuation);\r\n        return Vector.dot(scattered.direction, rec.normal) > 0;\r\n    }\r\n};\r\nMetalMaterial = __decorate([\r\n    serializing_1.serializable\r\n], MetalMaterial);\r\nexports.default = MetalMaterial;\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/raytracer-cpu/metal.ts?");

/***/ }),

/***/ "./src/raytracer-cpu/movingsphere.ts":
/*!*******************************************!*\
  !*** ./src/raytracer-cpu/movingsphere.ts ***!
  \*******************************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: top-level-this-exports, __webpack_exports__, __webpack_require__ */
/*! CommonJS bailout: this is used directly at 2:23-27 */
/*! CommonJS bailout: this is used directly at 9:26-30 */
/*! CommonJS bailout: this is used directly at 14:18-22 */
/*! CommonJS bailout: this is used directly at 20:20-24 */
/*! CommonJS bailout: this is used directly at 27:23-27 */
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nconst serializing_1 = __webpack_require__(/*! ../serializing */ \"./src/serializing/index.ts\");\r\nconst Vector = __importStar(__webpack_require__(/*! ../vec3 */ \"./src/vec3.ts\"));\r\nconst aabb_1 = __importDefault(__webpack_require__(/*! ./aabb */ \"./src/raytracer-cpu/aabb.ts\"));\r\nconst hittable_1 = __webpack_require__(/*! ./hittable */ \"./src/raytracer-cpu/hittable.ts\");\r\nlet MovingSphere = class MovingSphere extends hittable_1.Hittable {\r\n    constructor(center0, center1, t0, t1, radius, mat) {\r\n        super();\r\n        this._center0 = center0;\r\n        this._center1 = center1;\r\n        this._time0 = t0;\r\n        this._time1 = t1;\r\n        this._radius = radius;\r\n        this._material = mat;\r\n    }\r\n    hit(r, t_min, t_max, rec) {\r\n        const oc = Vector.subVec3(r.origin, this.center(r.time));\r\n        const a = Vector.lengthSquared(r.direction);\r\n        const half_b = Vector.dot(oc, r.direction);\r\n        const c = Vector.lengthSquared(oc) - this._radius * this._radius;\r\n        const discriminat = half_b * half_b - a * c;\r\n        if (discriminat > 0) {\r\n            const root = Math.sqrt(discriminat);\r\n            let temp = (-half_b - root) / a;\r\n            if (temp < t_max && temp > t_min) {\r\n                rec.t = temp;\r\n                rec.p = r.at(rec.t);\r\n                const outward_normal = Vector.divScalarVec(Vector.subVec3(rec.p, this.center(r.time)), this._radius);\r\n                rec.setFaceNormal(r, outward_normal);\r\n                rec.mat = this._material;\r\n                return true;\r\n            }\r\n            temp = (-half_b + root) / a;\r\n            if (temp < t_max && temp > t_min) {\r\n                rec.t = temp;\r\n                rec.p = r.at(rec.t);\r\n                const outward_normal = Vector.divScalarVec(Vector.subVec3(rec.p, this.center(r.time)), this._radius);\r\n                rec.setFaceNormal(r, outward_normal);\r\n                rec.mat = this._material;\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    center(time) {\r\n        const timeDiff = (time - this._time0) / (this._time1 - this._time0);\r\n        const centerDiff = Vector.subVec3(this._center1, this._center0);\r\n        return Vector.addVec3(this._center0, Vector.multScalarVec3(centerDiff, timeDiff));\r\n    }\r\n    boundingBox(t0, t1, outputBox) {\r\n        const box0 = new aabb_1.default(Vector.subVec3(this.center(t0), [this._radius, this._radius, this._radius]), Vector.addVec3(this.center(t0), [this._radius, this._radius, this._radius]));\r\n        const box1 = new aabb_1.default(Vector.subVec3(this.center(t1), [this._radius, this._radius, this._radius]), Vector.addVec3(this.center(t1), [this._radius, this._radius, this._radius]));\r\n        const newOutputBox = aabb_1.default.surroundingBox(box0, box1);\r\n        newOutputBox.copyTo(outputBox);\r\n        return true;\r\n    }\r\n};\r\nMovingSphere = __decorate([\r\n    serializing_1.serializable\r\n], MovingSphere);\r\nexports.default = MovingSphere;\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/raytracer-cpu/movingsphere.ts?");

/***/ }),

/***/ "./src/raytracer-cpu/perlin.ts":
/*!*************************************!*\
  !*** ./src/raytracer-cpu/perlin.ts ***!
  \*************************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: top-level-this-exports, __webpack_exports__, __webpack_require__ */
/*! CommonJS bailout: this is used directly at 2:23-27 */
/*! CommonJS bailout: this is used directly at 9:26-30 */
/*! CommonJS bailout: this is used directly at 14:18-22 */
/*! CommonJS bailout: this is used directly at 20:20-24 */
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar Perlin_1;\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nconst serializing_1 = __webpack_require__(/*! ../serializing */ \"./src/serializing/index.ts\");\r\nconst util_1 = __webpack_require__(/*! ../util */ \"./src/util.ts\");\r\nconst Vector = __importStar(__webpack_require__(/*! ../vec3 */ \"./src/vec3.ts\"));\r\nlet Perlin = Perlin_1 = class Perlin {\r\n    constructor() {\r\n        this._ranVecs = new Array(Perlin_1._pointCount);\r\n        for (let i = 0; i < Perlin_1._pointCount; i++) {\r\n            this._ranVecs[i] = Vector.unitVector(Vector.randomRange(-1, 1));\r\n        }\r\n        this._permX = Perlin_1.perlinGeneratePerm();\r\n        this._permY = Perlin_1.perlinGeneratePerm();\r\n        this._permZ = Perlin_1.perlinGeneratePerm();\r\n    }\r\n    noise(p) {\r\n        let u = p[0] - Math.floor(p[0]);\r\n        let v = p[1] - Math.floor(p[1]);\r\n        let w = p[2] - Math.floor(p[2]);\r\n        // const i = Math.trunc(4 * p.x) & 255;\r\n        // const j = Math.trunc(4 * p.y) & 255;\r\n        // const k = Math.trunc(4 * p.z) & 255;\r\n        u = u * u * (3 - 2 * u);\r\n        v = v * v * (3 - 2 * v);\r\n        w = w * w * (3 - 2 * w);\r\n        const i = Math.floor(p[0]);\r\n        const j = Math.floor(p[1]);\r\n        const k = Math.floor(p[2]);\r\n        const c = [\r\n            [[], []],\r\n            [[], []],\r\n        ];\r\n        for (let di = 0; di < 2; di++)\r\n            for (let dj = 0; dj < 2; dj++)\r\n                for (let dk = 0; dk < 2; dk++)\r\n                    c[di][dj][dk] = this._ranVecs[this._permX[(i + di) & 255] ^ this._permY[(j + dj) & 255] ^ this._permZ[(k + dk) & 255]];\r\n        // const noise = this._ranFloat[this._permX[i] ^ this._permY[j] ^ this._permZ[k]];\r\n        const noise = trilinearInterp(c, u, v, w);\r\n        return noise;\r\n    }\r\n    turb(p, depth = 7) {\r\n        let accum = 0.0;\r\n        let temp_p = p;\r\n        let weight = 1.0;\r\n        for (let i = 0; i < depth; i++) {\r\n            accum += weight * this.noise(temp_p);\r\n            weight *= 0.5;\r\n            temp_p = Vector.multScalarVec3(temp_p, 2);\r\n        }\r\n        return Math.abs(accum);\r\n    }\r\n    static perlinGeneratePerm() {\r\n        const array = new Array(Perlin_1._pointCount);\r\n        for (let i = 0; i < Perlin_1._pointCount; i++) {\r\n            array[i] = i;\r\n        }\r\n        Perlin_1.permute(array, Perlin_1._pointCount);\r\n        return array;\r\n    }\r\n    static permute(array, n) {\r\n        for (let i = n - 1; i > 0; i--) {\r\n            const target = util_1.randomInt(0, i);\r\n            const tmp = array[i];\r\n            array[i] = array[target];\r\n            array[target] = tmp;\r\n        }\r\n    }\r\n};\r\nPerlin._pointCount = 256;\r\nPerlin = Perlin_1 = __decorate([\r\n    serializing_1.serializable\r\n], Perlin);\r\nexports.default = Perlin;\r\nfunction trilinearInterp(c, u, v, w) {\r\n    const uu = u * u * (3 - 2 * u);\r\n    const vv = v * v * (3 - 2 * v);\r\n    const ww = w * w * (3 - 2 * w);\r\n    let accum = 0.0;\r\n    for (let i = 0; i < 2; i++) {\r\n        for (let j = 0; j < 2; j++) {\r\n            for (let k = 0; k < 2; k++) {\r\n                const weight = [u - i, v - j, w - k];\r\n                // prettier-ignore\r\n                accum += (i * uu + (1 - i) * (1 - uu))\r\n                    * (j * vv + (1 - j) * (1 - vv))\r\n                    * (k * ww + (1 - k) * (1 - ww))\r\n                    * Vector.dot(c[i][j][k], weight);\r\n            }\r\n        }\r\n    }\r\n    return accum;\r\n}\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/raytracer-cpu/perlin.ts?");

/***/ }),

/***/ "./src/raytracer-cpu/ray.ts":
/*!**********************************!*\
  !*** ./src/raytracer-cpu/ray.ts ***!
  \**********************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: top-level-this-exports, __webpack_exports__, __webpack_require__ */
/*! CommonJS bailout: this is used directly at 2:23-27 */
/*! CommonJS bailout: this is used directly at 9:26-30 */
/*! CommonJS bailout: this is used directly at 14:20-24 */
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.rayColor = void 0;\r\nconst Vector = __importStar(__webpack_require__(/*! ../vec3 */ \"./src/vec3.ts\"));\r\nconst hittable_1 = __webpack_require__(/*! ./hittable */ \"./src/raytracer-cpu/hittable.ts\");\r\nclass Ray {\r\n    constructor(origin, direction, time = 0.0) {\r\n        if (origin) {\r\n            this._orig = origin;\r\n        }\r\n        if (direction) {\r\n            this._dir = direction;\r\n        }\r\n        this._time = time;\r\n    }\r\n    copyTo(dest) {\r\n        dest._orig = this._orig;\r\n        dest._dir = this._dir;\r\n        dest._time = this._time;\r\n    }\r\n    get origin() {\r\n        return this._orig;\r\n    }\r\n    set origin(origin) {\r\n        this._orig = origin;\r\n    }\r\n    get direction() {\r\n        return this._dir;\r\n    }\r\n    set direction(direction) {\r\n        this._dir = direction;\r\n    }\r\n    get time() {\r\n        return this._time;\r\n    }\r\n    at(t) {\r\n        return Vector.addVec3(this._orig, Vector.multScalarVec3(this._dir, t));\r\n    }\r\n}\r\nexports.default = Ray;\r\nfunction rayColor(r, background, world, depth) {\r\n    const rec = new hittable_1.HitRecord();\r\n    // If we've exceeded the ray bounce limit, no more light is gathered.\r\n    if (depth <= 0) {\r\n        return [0, 0, 0];\r\n    }\r\n    // If the ray hits nothing, return the background color.\r\n    if (!world.hit(r, 0.001, Number.POSITIVE_INFINITY, rec)) {\r\n        return background;\r\n    }\r\n    const scattered = new Ray();\r\n    const attenuation = [0, 0, 0];\r\n    const emitted = rec.mat.emitted(rec.u, rec.v, rec.p);\r\n    if (!rec.mat.scatter(r, rec, attenuation, scattered)) {\r\n        return emitted;\r\n    }\r\n    return Vector.addVec3(emitted, Vector.multVec3(attenuation, rayColor(scattered, background, world, depth - 1)));\r\n    /*\r\n    const unit_direction = Vec3.unitVector(r.direction);\r\n    const t = 0.5 * (unit_direction.y + 1);\r\n    const color1 = Vec3.multScalarVec3(new Vec3(1, 1, 1), 1 - t);\r\n    const color2 = Vec3.multScalarVec3(new Vec3(0.5, 0.7, 1.0), t);\r\n  \r\n    return Vec3.addVec3(color1, color2);\r\n    */\r\n}\r\nexports.rayColor = rayColor;\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/raytracer-cpu/ray.ts?");

/***/ }),

/***/ "./src/raytracer-cpu/rotation.ts":
/*!***************************************!*\
  !*** ./src/raytracer-cpu/rotation.ts ***!
  \***************************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: top-level-this-exports, __webpack_exports__, __webpack_require__ */
/*! CommonJS bailout: this is used directly at 2:23-27 */
/*! CommonJS bailout: this is used directly at 9:26-30 */
/*! CommonJS bailout: this is used directly at 14:18-22 */
/*! CommonJS bailout: this is used directly at 20:20-24 */
/*! CommonJS bailout: this is used directly at 27:23-27 */
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.RotateY = void 0;\r\nconst serializing_1 = __webpack_require__(/*! ../serializing */ \"./src/serializing/index.ts\");\r\nconst util_1 = __webpack_require__(/*! ../util */ \"./src/util.ts\");\r\nconst Vector = __importStar(__webpack_require__(/*! ../vec3 */ \"./src/vec3.ts\"));\r\nconst aabb_1 = __importDefault(__webpack_require__(/*! ./aabb */ \"./src/raytracer-cpu/aabb.ts\"));\r\nconst hittable_1 = __webpack_require__(/*! ./hittable */ \"./src/raytracer-cpu/hittable.ts\");\r\nconst ray_1 = __importDefault(__webpack_require__(/*! ./ray */ \"./src/raytracer-cpu/ray.ts\"));\r\nlet RotateY = class RotateY extends hittable_1.Hittable {\r\n    constructor(p, angle) {\r\n        super();\r\n        this._bbBox = new aabb_1.default();\r\n        this._p = p;\r\n        const radians = util_1.degreeToRadians(angle);\r\n        this._sinTheta = Math.sin(radians);\r\n        this._cosTheta = Math.cos(radians);\r\n        this._hasBox = this._p.boundingBox(0, 1, this._bbBox);\r\n        const min = [Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY];\r\n        const max = [Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY];\r\n        for (let i = 0; i < 2; i++) {\r\n            for (let j = 0; j < 2; j++) {\r\n                for (let k = 0; k < 2; k++) {\r\n                    const x = i * this._bbBox.max[0] + (1 - i) * this._bbBox.min[0];\r\n                    const y = j * this._bbBox.max[0] + (1 - j) * this._bbBox.min[0];\r\n                    const z = k * this._bbBox.max[2] + (1 - k) * this._bbBox.min[2];\r\n                    const newx = this._cosTheta * x + this._sinTheta * z;\r\n                    const newz = -this._sinTheta * x + this._cosTheta * z;\r\n                    const tester = [newx, y, newz];\r\n                    min[0] = Math.min(min[0], tester[0]);\r\n                    max[0] = Math.max(max[0], tester[0]);\r\n                    min[1] = Math.min(min[1], tester[1]);\r\n                    max[1] = Math.max(max[1], tester[1]);\r\n                    min[2] = Math.min(min[2], tester[2]);\r\n                    max[2] = Math.max(max[2], tester[2]);\r\n                }\r\n            }\r\n        }\r\n        this._bbBox = new aabb_1.default(min, max);\r\n    }\r\n    hit(r, t_min, t_max, rec) {\r\n        const origin = Vector.clone(r.origin);\r\n        const direction = Vector.clone(r.direction);\r\n        origin[0] = this._cosTheta * r.origin[0] - this._sinTheta * r.origin[2];\r\n        origin[2] = this._sinTheta * r.origin[0] + this._cosTheta * r.origin[2];\r\n        direction[0] = this._cosTheta * r.direction[0] - this._sinTheta * r.direction[2];\r\n        direction[2] = this._sinTheta * r.direction[0] + this._cosTheta * r.direction[2];\r\n        const rotatedRay = new ray_1.default(origin, direction, r.time);\r\n        if (!this._p.hit(rotatedRay, t_min, t_max, rec)) {\r\n            return false;\r\n        }\r\n        const p = rec.p;\r\n        const normal = rec.normal;\r\n        p[0] = this._cosTheta * rec.p[0] + this._sinTheta * rec.p[2];\r\n        p[2] = -this._sinTheta * rec.p[0] + this._cosTheta * rec.p[2];\r\n        normal[0] = this._cosTheta * rec.normal[0] + this._sinTheta * rec.normal[2];\r\n        normal[2] = -this._sinTheta * rec.normal[0] + this._cosTheta * rec.normal[2];\r\n        rec.p = p;\r\n        rec.setFaceNormal(rotatedRay, normal);\r\n        return true;\r\n    }\r\n    boundingBox(t0, t1, outputBox) {\r\n        this._bbBox.copyTo(outputBox);\r\n        return this._hasBox;\r\n    }\r\n};\r\nRotateY = __decorate([\r\n    serializing_1.serializable\r\n], RotateY);\r\nexports.RotateY = RotateY;\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/raytracer-cpu/rotation.ts?");

/***/ }),

/***/ "./src/raytracer-cpu/sphere.ts":
/*!*************************************!*\
  !*** ./src/raytracer-cpu/sphere.ts ***!
  \*************************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: top-level-this-exports, __webpack_exports__, __webpack_require__ */
/*! CommonJS bailout: this is used directly at 2:23-27 */
/*! CommonJS bailout: this is used directly at 9:26-30 */
/*! CommonJS bailout: this is used directly at 14:18-22 */
/*! CommonJS bailout: this is used directly at 20:20-24 */
/*! CommonJS bailout: this is used directly at 27:23-27 */
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.Sphere = void 0;\r\nconst hittable_1 = __webpack_require__(/*! ./hittable */ \"./src/raytracer-cpu/hittable.ts\");\r\nconst Vector = __importStar(__webpack_require__(/*! ../vec3 */ \"./src/vec3.ts\"));\r\nconst aabb_1 = __importDefault(__webpack_require__(/*! ./aabb */ \"./src/raytracer-cpu/aabb.ts\"));\r\nconst serializing_1 = __webpack_require__(/*! ../serializing */ \"./src/serializing/index.ts\");\r\nfunction getSphereUV(p) {\r\n    const phi = Math.atan2(p[2], p[0]);\r\n    const theta = Math.asin(p[1]);\r\n    const u = 1 - (phi + Math.PI) / (2 * Math.PI);\r\n    const v = (theta + Math.PI / 2) / Math.PI;\r\n    return { u, v };\r\n}\r\nlet Sphere = class Sphere extends hittable_1.Hittable {\r\n    constructor(center, radius, mat) {\r\n        super();\r\n        this._center = center;\r\n        this._radius = radius;\r\n        this.material = mat;\r\n    }\r\n    get center() {\r\n        return this._center;\r\n    }\r\n    get radius() {\r\n        return this._radius;\r\n    }\r\n    hit(r, t_min, t_max, rec) {\r\n        const oc = Vector.subVec3(r.origin, this._center);\r\n        const a = Vector.lengthSquared(r.direction);\r\n        const half_b = Vector.dot(oc, r.direction);\r\n        const c = Vector.lengthSquared(oc) - this._radius * this._radius;\r\n        const discriminat = half_b * half_b - a * c;\r\n        if (discriminat > 0) {\r\n            const root = Math.sqrt(discriminat);\r\n            let temp = (-half_b - root) / a;\r\n            if (temp < t_max && temp > t_min) {\r\n                rec.t = temp;\r\n                rec.p = r.at(rec.t);\r\n                const outward_normal = Vector.divScalarVec(Vector.subVec3(rec.p, this._center), this._radius);\r\n                rec.setFaceNormal(r, outward_normal);\r\n                const uv = getSphereUV(Vector.divScalarVec(Vector.subVec3(rec.p, this._center), this._radius));\r\n                rec.u = uv.u;\r\n                rec.v = uv.v;\r\n                rec.mat = this.material;\r\n                return true;\r\n            }\r\n            temp = (-half_b + root) / a;\r\n            if (temp < t_max && temp > t_min) {\r\n                rec.t = temp;\r\n                rec.p = r.at(rec.t);\r\n                const outward_normal = Vector.divScalarVec(Vector.subVec3(rec.p, this._center), this._radius);\r\n                rec.setFaceNormal(r, outward_normal);\r\n                const uv = getSphereUV(Vector.divScalarVec(Vector.subVec3(rec.p, this._center), this._radius));\r\n                rec.u = uv.u;\r\n                rec.v = uv.v;\r\n                rec.mat = this.material;\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    boundingBox(t0, t1, outputBox) {\r\n        const newOutputBox = new aabb_1.default(Vector.subVec3(this._center, [this._radius, this._radius, this._radius]), Vector.addVec3(this._center, [this._radius, this._radius, this._radius]));\r\n        newOutputBox.copyTo(outputBox);\r\n        return true;\r\n    }\r\n};\r\nSphere = __decorate([\r\n    serializing_1.serializable\r\n], Sphere);\r\nexports.Sphere = Sphere;\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/raytracer-cpu/sphere.ts?");

/***/ }),

/***/ "./src/raytracer-cpu/texture.ts":
/*!**************************************!*\
  !*** ./src/raytracer-cpu/texture.ts ***!
  \**************************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: top-level-this-exports, __webpack_exports__, __webpack_require__ */
/*! CommonJS bailout: this is used directly at 2:23-27 */
/*! CommonJS bailout: this is used directly at 9:26-30 */
/*! CommonJS bailout: this is used directly at 14:18-22 */
/*! CommonJS bailout: this is used directly at 20:20-24 */
/*! CommonJS bailout: this is used directly at 27:23-27 */
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nvar ImageTexture_1;\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.ImageTexture = exports.NoiseTexture = exports.CheckerTexture = exports.SolidColor = exports.Texture = void 0;\r\nconst Vector = __importStar(__webpack_require__(/*! ../vec3 */ \"./src/vec3.ts\"));\r\nconst serializing_1 = __webpack_require__(/*! ../serializing */ \"./src/serializing/index.ts\");\r\nconst perlin_1 = __importDefault(__webpack_require__(/*! ./perlin */ \"./src/raytracer-cpu/perlin.ts\"));\r\nconst util_1 = __webpack_require__(/*! ../util */ \"./src/util.ts\");\r\nclass Texture {\r\n}\r\nexports.Texture = Texture;\r\nlet SolidColor = class SolidColor extends Texture {\r\n    constructor(color) {\r\n        super();\r\n        this._color = color;\r\n    }\r\n    value(_u, _v, _p) {\r\n        return this._color;\r\n    }\r\n    get color() {\r\n        return this._color;\r\n    }\r\n};\r\nSolidColor = __decorate([\r\n    serializing_1.serializable\r\n], SolidColor);\r\nexports.SolidColor = SolidColor;\r\nlet CheckerTexture = class CheckerTexture extends Texture {\r\n    constructor(odd, even) {\r\n        super();\r\n        this._odd = new SolidColor(odd);\r\n        this._even = new SolidColor(even);\r\n    }\r\n    value(u, v, p) {\r\n        const sines = Math.sin(10 * p[0]) * Math.sin(10 * p[1]) * Math.sin(10 * p[2]);\r\n        if (sines < 0) {\r\n            return this._odd.value(u, v, p);\r\n        }\r\n        else {\r\n            return this._even.value(u, v, p);\r\n        }\r\n    }\r\n    get odd() {\r\n        return this._odd.color;\r\n    }\r\n    get even() {\r\n        return this._even.color;\r\n    }\r\n};\r\nCheckerTexture = __decorate([\r\n    serializing_1.serializable\r\n], CheckerTexture);\r\nexports.CheckerTexture = CheckerTexture;\r\nlet NoiseTexture = class NoiseTexture extends Texture {\r\n    constructor(scale) {\r\n        super();\r\n        this._noise = new perlin_1.default();\r\n        this._scale = scale;\r\n    }\r\n    get scale() {\r\n        return this._scale;\r\n    }\r\n    value(u, v, p) {\r\n        // return Vec3.multScalarVec3(\r\n        //   Vec3.multScalarVec3(new Vec3(1, 1, 1), 0.5),\r\n        //   1.0 + this._noise.noise(Vec3.multScalarVec3(p, this._scale))\r\n        // );\r\n        //return Vec3.multScalarVec3(new Vec3(1, 1, 1), this._noise.turb(Vec3.multScalarVec3(p, this._scale)));\r\n        return Vector.multScalarVec3(Vector.multScalarVec3([1, 1, 1], 0.5), 1.0 + Math.sin(this._scale * p[2] + 10 * this._noise.turb(p)));\r\n    }\r\n};\r\nNoiseTexture = __decorate([\r\n    serializing_1.serializable\r\n], NoiseTexture);\r\nexports.NoiseTexture = NoiseTexture;\r\nlet ImageTexture = ImageTexture_1 = class ImageTexture extends Texture {\r\n    constructor() {\r\n        super();\r\n        this._width = 0;\r\n        this._height = 0;\r\n        this._bytesPerScanLine = 0;\r\n    }\r\n    async load(imageUrl) {\r\n        const response = await fetch(imageUrl);\r\n        const blob = await response.blob();\r\n        const imgBitmap = await window.createImageBitmap(blob);\r\n        // Firefox do not support 2D context on OffscreenCanvas :-(\r\n        //const canvas = new OffscreenCanvas(imgBitmap.width, imgBitmap.height);\r\n        const canvas = document.createElement('canvas');\r\n        canvas.width = imgBitmap.width;\r\n        canvas.height = imgBitmap.height;\r\n        const ctx = canvas.getContext('2d');\r\n        ctx.drawImage(imgBitmap, 0, 0);\r\n        const imgData = ctx.getImageData(0, 0, imgBitmap.width, imgBitmap.height);\r\n        this._width = imgData.width;\r\n        this._height = imgData.height;\r\n        this._data = imgData.data;\r\n        this._bytesPerScanLine = ImageTexture_1.BytesPerPixel * this._width;\r\n    }\r\n    value(u, v, _p) {\r\n        // If we have no texture data, then return solid cyan as a debugging aid.\r\n        if (!this._data || this._data.length === 0) {\r\n            return [0, 1, 1];\r\n        }\r\n        // Clamp input texture coordinates to [0,1] x [1,0]\r\n        u = util_1.clamp(u, 0.0, 1.0);\r\n        v = 1.0 - util_1.clamp(v, 0.0, 1.0); // Flip V to image coordinates\r\n        let i = Math.trunc(u * this._width);\r\n        let j = Math.trunc(v * this._height);\r\n        // Clamp integer mapping, since actual coordinates should be less than 1.0\r\n        if (i >= this._width)\r\n            i = this._width - 1;\r\n        if (j >= this._height)\r\n            j = this._height - 1;\r\n        const colorScale = 1.0 / 255.0;\r\n        let pixelOffset = j * this._bytesPerScanLine + i * ImageTexture_1.BytesPerPixel;\r\n        return [\r\n            this._data[pixelOffset++] * colorScale,\r\n            this._data[pixelOffset++] * colorScale,\r\n            this._data[pixelOffset++] * colorScale,\r\n        ];\r\n    }\r\n};\r\nImageTexture.BytesPerPixel = 4;\r\nImageTexture = ImageTexture_1 = __decorate([\r\n    serializing_1.serializable\r\n], ImageTexture);\r\nexports.ImageTexture = ImageTexture;\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/raytracer-cpu/texture.ts?");

/***/ }),

/***/ "./src/raytracer-cpu/translate.ts":
/*!****************************************!*\
  !*** ./src/raytracer-cpu/translate.ts ***!
  \****************************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: top-level-this-exports, __webpack_exports__, __webpack_require__ */
/*! CommonJS bailout: this is used directly at 2:23-27 */
/*! CommonJS bailout: this is used directly at 9:26-30 */
/*! CommonJS bailout: this is used directly at 14:18-22 */
/*! CommonJS bailout: this is used directly at 20:20-24 */
/*! CommonJS bailout: this is used directly at 27:23-27 */
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nconst serializing_1 = __webpack_require__(/*! ../serializing */ \"./src/serializing/index.ts\");\r\nconst Vector = __importStar(__webpack_require__(/*! ../vec3 */ \"./src/vec3.ts\"));\r\nconst aabb_1 = __importDefault(__webpack_require__(/*! ./aabb */ \"./src/raytracer-cpu/aabb.ts\"));\r\nconst hittable_1 = __webpack_require__(/*! ./hittable */ \"./src/raytracer-cpu/hittable.ts\");\r\nconst ray_1 = __importDefault(__webpack_require__(/*! ./ray */ \"./src/raytracer-cpu/ray.ts\"));\r\nlet Translate = class Translate extends hittable_1.Hittable {\r\n    constructor(p, offset) {\r\n        super();\r\n        this._p = p;\r\n        this._offset = offset;\r\n    }\r\n    hit(r, t_min, t_max, rec) {\r\n        const movedRay = new ray_1.default(Vector.subVec3(r.origin, this._offset), r.direction, r.time);\r\n        if (!this._p.hit(movedRay, t_min, t_max, rec)) {\r\n            return false;\r\n        }\r\n        rec.p = Vector.addVec3(rec.p, this._offset);\r\n        rec.setFaceNormal(movedRay, rec.normal);\r\n        return true;\r\n    }\r\n    boundingBox(t0, t1, outputBox) {\r\n        if (!this._p.boundingBox(t0, t1, outputBox)) {\r\n            return false;\r\n        }\r\n        const newOutputBox = new aabb_1.default(Vector.addVec3(outputBox.min, this._offset), Vector.addVec3(outputBox.max, this._offset));\r\n        newOutputBox.copyTo(outputBox);\r\n        return true;\r\n    }\r\n};\r\nTranslate = __decorate([\r\n    serializing_1.serializable\r\n], Translate);\r\nexports.default = Translate;\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/raytracer-cpu/translate.ts?");

/***/ }),

/***/ "./src/raytracer-cpu/workerinterfaces.ts":
/*!***********************************************!*\
  !*** ./src/raytracer-cpu/workerinterfaces.ts ***!
  \***********************************************/
/*! flagged exports */
/*! export ComputeCommands [provided] [no usage info] [missing usage info prevents renaming] */
/*! export ControllerCommands [provided] [no usage info] [missing usage info prevents renaming] */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__ */
/***/ ((__unused_webpack_module, exports) => {

eval("\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.ComputeCommands = exports.ControllerCommands = void 0;\r\nvar ControllerCommands;\r\n(function (ControllerCommands) {\r\n    ControllerCommands[ControllerCommands[\"START\"] = 0] = \"START\";\r\n    ControllerCommands[ControllerCommands[\"STOP\"] = 1] = \"STOP\";\r\n    ControllerCommands[ControllerCommands[\"END\"] = 2] = \"END\";\r\n})(ControllerCommands = exports.ControllerCommands || (exports.ControllerCommands = {}));\r\nvar ComputeCommands;\r\n(function (ComputeCommands) {\r\n    ComputeCommands[ComputeCommands[\"START\"] = 0] = \"START\";\r\n    ComputeCommands[ComputeCommands[\"END\"] = 1] = \"END\";\r\n})(ComputeCommands = exports.ComputeCommands || (exports.ComputeCommands = {}));\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/raytracer-cpu/workerinterfaces.ts?");

/***/ }),

/***/ "./src/serializing/decorators.ts":
/*!***************************************!*\
  !*** ./src/serializing/decorators.ts ***!
  \***************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export serializable [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.serializable = void 0;\r\nconst metadata_1 = __webpack_require__(/*! ./metadata */ \"./src/serializing/metadata.ts\");\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nfunction serializable(type) {\r\n    metadata_1.addClassName(type);\r\n}\r\nexports.serializable = serializable;\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/serializing/decorators.ts?");

/***/ }),

/***/ "./src/serializing/deserialize.ts":
/*!****************************************!*\
  !*** ./src/serializing/deserialize.ts ***!
  \****************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export deserialize [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.deserialize = void 0;\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nconst interfaces_1 = __webpack_require__(/*! ./interfaces */ \"./src/serializing/interfaces.ts\");\r\nconst metadata_1 = __webpack_require__(/*! ./metadata */ \"./src/serializing/metadata.ts\");\r\nfunction _deserialize(type, data) {\r\n    const instance = Object.create(type.prototype);\r\n    for (const k in data) {\r\n        const v = data[k];\r\n        if (Array.isArray(v)) {\r\n            instance[k] = v.map((val) => {\r\n                const className = val[interfaces_1.CLASSNAME_KEY];\r\n                if (className) {\r\n                    const newtype = metadata_1.getClassConstructor(val[interfaces_1.CLASSNAME_KEY]);\r\n                    return _deserialize(newtype, val);\r\n                }\r\n                return val;\r\n            });\r\n        }\r\n        else if (typeof v === 'object') {\r\n            const newtype = metadata_1.getClassConstructor(v[interfaces_1.CLASSNAME_KEY]);\r\n            instance[k] = _deserialize(newtype, v);\r\n        }\r\n        else {\r\n            instance[k] = v;\r\n        }\r\n    }\r\n    return instance;\r\n}\r\nfunction deserialize(type, data) {\r\n    return _deserialize(type, data);\r\n}\r\nexports.deserialize = deserialize;\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/serializing/deserialize.ts?");

/***/ }),

/***/ "./src/serializing/index.ts":
/*!**********************************!*\
  !*** ./src/serializing/index.ts ***!
  \**********************************/
/*! unknown exports (runtime-defined) */
/*! runtime requirements: top-level-this-exports, __webpack_exports__, __webpack_require__ */
/*! CommonJS bailout: this is used directly at 2:23-27 */
/*! CommonJS bailout: this is used directly at 9:20-24 */
/*! CommonJS bailout: exports is used directly at 13:38-45 */
/*! CommonJS bailout: exports is used directly at 14:37-44 */
/*! CommonJS bailout: exports is used directly at 15:39-46 */
/*! CommonJS bailout: exports is used directly at 16:38-45 */
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\n__exportStar(__webpack_require__(/*! ./interfaces */ \"./src/serializing/interfaces.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./serialize */ \"./src/serializing/serialize.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./deserialize */ \"./src/serializing/deserialize.ts\"), exports);\r\n__exportStar(__webpack_require__(/*! ./decorators */ \"./src/serializing/decorators.ts\"), exports);\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/serializing/index.ts?");

/***/ }),

/***/ "./src/serializing/interfaces.ts":
/*!***************************************!*\
  !*** ./src/serializing/interfaces.ts ***!
  \***************************************/
/*! flagged exports */
/*! export CLASSNAME_KEY [provided] [no usage info] [missing usage info prevents renaming] */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__ */
/***/ ((__unused_webpack_module, exports) => {

eval("\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.CLASSNAME_KEY = void 0;\r\nexports.CLASSNAME_KEY = '__CLASSNAME__';\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/serializing/interfaces.ts?");

/***/ }),

/***/ "./src/serializing/metadata.ts":
/*!*************************************!*\
  !*** ./src/serializing/metadata.ts ***!
  \*************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export addClassName [provided] [no usage info] [missing usage info prevents renaming] */
/*! export getClassConstructor [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__ */
/***/ ((__unused_webpack_module, exports) => {

eval("\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.getClassConstructor = exports.addClassName = void 0;\r\nconst _metaMap = new Map();\r\nfunction addClassName(type) {\r\n    //console.log(`add constructor of ${type.name} to map`);\r\n    _metaMap.set(type.name, type);\r\n}\r\nexports.addClassName = addClassName;\r\nfunction getClassConstructor(name) {\r\n    if (_metaMap.has(name)) {\r\n        return _metaMap.get(name);\r\n    }\r\n    console.error(`${name} not serializable, use the @serializable decorator`);\r\n    return null;\r\n}\r\nexports.getClassConstructor = getClassConstructor;\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/serializing/metadata.ts?");

/***/ }),

/***/ "./src/serializing/serialize.ts":
/*!**************************************!*\
  !*** ./src/serializing/serialize.ts ***!
  \**************************************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export serialize [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.serialize = void 0;\r\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nconst interfaces_1 = __webpack_require__(/*! ./interfaces */ \"./src/serializing/interfaces.ts\");\r\nfunction _serializeObject(type, instance) {\r\n    const target = {};\r\n    const name = instance.constructor.name;\r\n    const props = Object.getOwnPropertyNames(instance);\r\n    target[interfaces_1.CLASSNAME_KEY] = name;\r\n    for (const prop of props) {\r\n        const val = instance[prop];\r\n        target[prop] = _serialize(val.constructor, val);\r\n    }\r\n    return target;\r\n}\r\nfunction _serializeArray(type, instance) {\r\n    const target = instance.map((val) => {\r\n        return _serialize(val.constructor, val);\r\n    });\r\n    return target;\r\n}\r\nfunction _serialize(type, instance) {\r\n    if (Array.isArray(instance)) {\r\n        return _serializeArray(type, instance);\r\n    }\r\n    else if (instance instanceof Int8Array ||\r\n        instance instanceof Uint8Array ||\r\n        instance instanceof Uint8ClampedArray ||\r\n        instance instanceof Int16Array ||\r\n        instance instanceof Uint16Array ||\r\n        instance instanceof Int32Array ||\r\n        instance instanceof Uint32Array ||\r\n        instance instanceof Float32Array ||\r\n        instance instanceof Float64Array) {\r\n        return Array.from(instance);\r\n    }\r\n    else if (typeof instance === 'object') {\r\n        return _serializeObject(type, instance);\r\n    }\r\n    else if (typeof instance === 'string' || typeof instance === 'number' || typeof instance === 'boolean') {\r\n        return instance;\r\n    }\r\n    else {\r\n        console.error(`Instance not serializable, constructor: ${instance.constructor.name}`);\r\n    }\r\n}\r\nfunction serialize(type, instance) {\r\n    return _serializeObject(type, instance);\r\n}\r\nexports.serialize = serialize;\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/serializing/serialize.ts?");

/***/ }),

/***/ "./src/util.ts":
/*!*********************!*\
  !*** ./src/util.ts ***!
  \*********************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export clamp [provided] [no usage info] [missing usage info prevents renaming] */
/*! export degreeToRadians [provided] [no usage info] [missing usage info prevents renaming] */
/*! export randomInt [provided] [no usage info] [missing usage info prevents renaming] */
/*! export randomNumber [provided] [no usage info] [missing usage info prevents renaming] */
/*! export randomNumberRange [provided] [no usage info] [missing usage info prevents renaming] */
/*! export sleep [provided] [no usage info] [missing usage info prevents renaming] */
/*! export sortArrayRange [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__ */
/***/ ((__unused_webpack_module, exports) => {

eval("\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.sleep = exports.sortArrayRange = exports.randomInt = exports.clamp = exports.randomNumberRange = exports.randomNumber = exports.degreeToRadians = void 0;\r\nfunction degreeToRadians(degrees) {\r\n    return (degrees * Math.PI) / 180;\r\n}\r\nexports.degreeToRadians = degreeToRadians;\r\nfunction randomNumber() {\r\n    return Math.random();\r\n}\r\nexports.randomNumber = randomNumber;\r\nfunction randomNumberRange(min, max) {\r\n    return min + (max - min) * randomNumber();\r\n}\r\nexports.randomNumberRange = randomNumberRange;\r\nfunction clamp(x, min, max) {\r\n    if (x < min) {\r\n        return min;\r\n    }\r\n    if (x > max) {\r\n        return max;\r\n    }\r\n    return x;\r\n}\r\nexports.clamp = clamp;\r\nfunction randomInt(min, max) {\r\n    // Returns a random integer in [min,max].\r\n    return Math.floor(randomNumberRange(min, max + 1));\r\n}\r\nexports.randomInt = randomInt;\r\nfunction sortArrayRange(array, start, end, compareFn) {\r\n    array = [].concat(...array.slice(0, start), ...array.slice(start, start + end).sort(compareFn), ...array.slice(start + end, array.length));\r\n}\r\nexports.sortArrayRange = sortArrayRange;\r\nasync function sleep(ms) {\r\n    return new Promise((resolve) => setTimeout(resolve, ms));\r\n}\r\nexports.sleep = sleep;\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/util.ts?");

/***/ }),

/***/ "./src/vec3.ts":
/*!*********************!*\
  !*** ./src/vec3.ts ***!
  \*********************/
/*! flagged exports */
/*! export __esModule [provided] [no usage info] [missing usage info prevents renaming] */
/*! export add [provided] [no usage info] [missing usage info prevents renaming] */
/*! export addVec3 [provided] [no usage info] [missing usage info prevents renaming] */
/*! export b [provided] [no usage info] [missing usage info prevents renaming] */
/*! export clone [provided] [no usage info] [missing usage info prevents renaming] */
/*! export copyTo [provided] [no usage info] [missing usage info prevents renaming] */
/*! export cross [provided] [no usage info] [missing usage info prevents renaming] */
/*! export divScalarVec [provided] [no usage info] [missing usage info prevents renaming] */
/*! export divideScalar [provided] [no usage info] [missing usage info prevents renaming] */
/*! export dot [provided] [no usage info] [missing usage info prevents renaming] */
/*! export g [provided] [no usage info] [missing usage info prevents renaming] */
/*! export isVec3 [provided] [no usage info] [missing usage info prevents renaming] */
/*! export length [provided] [no usage info] [missing usage info prevents renaming] */
/*! export lengthSquared [provided] [no usage info] [missing usage info prevents renaming] */
/*! export multScalarVec3 [provided] [no usage info] [missing usage info prevents renaming] */
/*! export multVec3 [provided] [no usage info] [missing usage info prevents renaming] */
/*! export multiplyScalar [provided] [no usage info] [missing usage info prevents renaming] */
/*! export negate [provided] [no usage info] [missing usage info prevents renaming] */
/*! export r [provided] [no usage info] [missing usage info prevents renaming] */
/*! export random [provided] [no usage info] [missing usage info prevents renaming] */
/*! export randomInHemisphere [provided] [no usage info] [missing usage info prevents renaming] */
/*! export randomInUnitSphere [provided] [no usage info] [missing usage info prevents renaming] */
/*! export randomInUnitdisk [provided] [no usage info] [missing usage info prevents renaming] */
/*! export randomRange [provided] [no usage info] [missing usage info prevents renaming] */
/*! export randomUnitVector [provided] [no usage info] [missing usage info prevents renaming] */
/*! export reflect [provided] [no usage info] [missing usage info prevents renaming] */
/*! export refract [provided] [no usage info] [missing usage info prevents renaming] */
/*! export set [provided] [no usage info] [missing usage info prevents renaming] */
/*! export subVec3 [provided] [no usage info] [missing usage info prevents renaming] */
/*! export toString [provided] [no usage info] [provision prevents renaming (no use info)] */
/*! export unitVector [provided] [no usage info] [missing usage info prevents renaming] */
/*! export writeColor [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_exports__, __webpack_require__ */
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\r\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\r\nexports.writeColor = exports.randomInUnitdisk = exports.refract = exports.reflect = exports.randomInHemisphere = exports.randomUnitVector = exports.randomInUnitSphere = exports.randomRange = exports.random = exports.unitVector = exports.cross = exports.dot = exports.divScalarVec = exports.multScalarVec3 = exports.multVec3 = exports.subVec3 = exports.addVec3 = exports.toString = exports.divideScalar = exports.multiplyScalar = exports.add = exports.negate = exports.lengthSquared = exports.length = exports.b = exports.g = exports.r = exports.clone = exports.copyTo = exports.set = exports.isVec3 = void 0;\r\nconst util_1 = __webpack_require__(/*! ./util */ \"./src/util.ts\");\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\r\nfunction isVec3(v) {\r\n    return Array.isArray(v) && typeof v[0] === 'number' && typeof v[1] === 'number' && typeof v[2] === 'number';\r\n}\r\nexports.isVec3 = isVec3;\r\nfunction set(v, ...u) {\r\n    [v[0], v[1], v[2]] = u;\r\n}\r\nexports.set = set;\r\nfunction copyTo(v, dest) {\r\n    [dest[0], dest[1], dest[2]] = v;\r\n}\r\nexports.copyTo = copyTo;\r\nfunction clone(v) {\r\n    return [...v];\r\n}\r\nexports.clone = clone;\r\nfunction r(v, r) {\r\n    return r === undefined ? v[0] : (v[0] = r);\r\n}\r\nexports.r = r;\r\nfunction g(v, g) {\r\n    return g === undefined ? v[1] : (v[1] = g);\r\n}\r\nexports.g = g;\r\nfunction b(v, b) {\r\n    return r === undefined ? v[2] : (v[2] = b);\r\n}\r\nexports.b = b;\r\nfunction length(v) {\r\n    return Math.sqrt(lengthSquared(v));\r\n}\r\nexports.length = length;\r\nfunction lengthSquared(v) {\r\n    return v[0] ** 2 + v[1] ** 2 + v[2] ** 2;\r\n}\r\nexports.lengthSquared = lengthSquared;\r\nfunction negate(v) {\r\n    return [-v[0], -v[1], -v[2]];\r\n}\r\nexports.negate = negate;\r\nfunction add(v, o) {\r\n    return [v[0] + o[0], v[1] + o[1], v[2] + o[2]];\r\n}\r\nexports.add = add;\r\nfunction multiplyScalar(v, t) {\r\n    return [v[0] * t, v[1] * t, v[2] * t];\r\n}\r\nexports.multiplyScalar = multiplyScalar;\r\nfunction divideScalar(v, t) {\r\n    return [v[0] / t, v[1] / t, v[2] / t];\r\n}\r\nexports.divideScalar = divideScalar;\r\nfunction toString(v) {\r\n    return `${v[0]}, ${v[1]}, ${v[2]}`;\r\n}\r\nexports.toString = toString;\r\nfunction addVec3(u, v) {\r\n    return [u[0] + v[0], u[1] + v[1], u[2] + v[2]];\r\n}\r\nexports.addVec3 = addVec3;\r\nfunction subVec3(u, v) {\r\n    return [u[0] - v[0], u[1] - v[1], u[2] - v[2]];\r\n}\r\nexports.subVec3 = subVec3;\r\nfunction multVec3(u, v) {\r\n    return [u[0] * v[0], u[1] * v[1], u[2] * v[2]];\r\n}\r\nexports.multVec3 = multVec3;\r\nfunction multScalarVec3(v, t) {\r\n    return [t * v[0], t * v[1], t * v[2]];\r\n}\r\nexports.multScalarVec3 = multScalarVec3;\r\nfunction divScalarVec(v, t) {\r\n    return [v[0] / t, v[1] / t, v[2] / t];\r\n}\r\nexports.divScalarVec = divScalarVec;\r\nfunction dot(u, v) {\r\n    return u[0] * v[0] + u[1] * v[1] + u[2] * v[2];\r\n}\r\nexports.dot = dot;\r\nfunction cross(u, v) {\r\n    // prettier-ignore\r\n    return [\r\n        u[1] * v[2] - u[2] * v[1],\r\n        u[2] * v[0] - u[0] * v[2],\r\n        u[0] * v[1] - u[1] * v[0]\r\n    ];\r\n}\r\nexports.cross = cross;\r\nfunction unitVector(v) {\r\n    return divScalarVec(v, length(v));\r\n}\r\nexports.unitVector = unitVector;\r\nfunction random() {\r\n    return [util_1.randomNumber(), util_1.randomNumber(), util_1.randomNumber()];\r\n}\r\nexports.random = random;\r\nfunction randomRange(min, max) {\r\n    return [util_1.randomNumberRange(min, max), util_1.randomNumberRange(min, max), util_1.randomNumberRange(min, max)];\r\n}\r\nexports.randomRange = randomRange;\r\nfunction randomInUnitSphere() {\r\n    // eslint-disable-next-line no-constant-condition\r\n    while (true) {\r\n        const p = randomRange(-1, 1);\r\n        if (lengthSquared(p) >= 1) {\r\n            continue;\r\n        }\r\n        return p;\r\n    }\r\n}\r\nexports.randomInUnitSphere = randomInUnitSphere;\r\nfunction randomUnitVector() {\r\n    const a = util_1.randomNumberRange(0, 2 * Math.PI);\r\n    const z = util_1.randomNumberRange(-1, 1);\r\n    const r = Math.sqrt(1 - z * z);\r\n    return [r * Math.cos(a), r * Math.sin(a), z];\r\n}\r\nexports.randomUnitVector = randomUnitVector;\r\nfunction randomInHemisphere(normal) {\r\n    const in_unit_sphere = randomInUnitSphere();\r\n    if (dot(in_unit_sphere, normal) > 0.0) {\r\n        // In the same hemisphere as the normal\r\n        return in_unit_sphere;\r\n    }\r\n    else {\r\n        return negate(in_unit_sphere);\r\n    }\r\n}\r\nexports.randomInHemisphere = randomInHemisphere;\r\nfunction reflect(v, n) {\r\n    return subVec3(v, multScalarVec3(n, 2 * dot(v, n)));\r\n}\r\nexports.reflect = reflect;\r\nfunction refract(uv, n, etai_over_etat) {\r\n    const cos_theta = dot(negate(uv), n);\r\n    const uvTheta = addVec3(uv, multScalarVec3(n, cos_theta));\r\n    const r_out_parallel = multScalarVec3(uvTheta, etai_over_etat);\r\n    const r_out_perp = multScalarVec3(n, -Math.sqrt(1 - lengthSquared(r_out_parallel)));\r\n    return addVec3(r_out_parallel, r_out_perp);\r\n}\r\nexports.refract = refract;\r\nfunction randomInUnitdisk() {\r\n    // eslint-disable-next-line no-constant-condition\r\n    while (true) {\r\n        const p = [util_1.randomNumberRange(-1, 1), util_1.randomNumberRange(-1, 1), 0];\r\n        if (lengthSquared(p) >= 1) {\r\n            continue;\r\n        }\r\n        return p;\r\n    }\r\n}\r\nexports.randomInUnitdisk = randomInUnitdisk;\r\nfunction writeColor(array, offset, color, samples_per_pixel) {\r\n    let r = color[0];\r\n    let g = color[1];\r\n    let b = color[2];\r\n    // Divide the color total by the number of samples and gamma-correct for gamma=2.0.\r\n    const scale = 1.0 / samples_per_pixel;\r\n    r = Math.sqrt(scale * r);\r\n    g = Math.sqrt(scale * g);\r\n    b = Math.sqrt(scale * b);\r\n    // Write the translated [0,255] value of each color component.\r\n    array[offset++] = r * 255;\r\n    array[offset++] = g * 255;\r\n    array[offset++] = b * 255;\r\n    array[offset++] = 255;\r\n}\r\nexports.writeColor = writeColor;\r\n/*\r\nfunction createRandomVecs(count: number): void {\r\n  for (let i = 0; i < count; i++) {\r\n    const v = unitVector(randomRange(-1, 1));\r\n    console.log(`vec3(${v[0]}, ${v[1]}, ${v[2]}),`);\r\n  }\r\n}\r\n\r\ncreateRandomVecs(256);\r\n*/\r\n\n\n//# sourceURL=webpack://ts-raytracer/./src/vec3.ts?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	// startup
/******/ 	// Load entry module
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	__webpack_require__("./node_modules/ts-loader/index.js!./src/raytracer-cpu/compute.worker.ts");
/******/ })()
;